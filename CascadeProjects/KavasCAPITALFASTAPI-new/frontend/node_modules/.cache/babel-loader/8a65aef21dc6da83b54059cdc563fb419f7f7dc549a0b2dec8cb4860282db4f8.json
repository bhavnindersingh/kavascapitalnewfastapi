{"ast":null,"code":"import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{TextField,Button,Box,Typography,Alert,Stepper,Step,StepLabel,Link,Paper,CircularProgress,Snackbar}from'@mui/material';import{setAccessToken,setError,setLoading}from'../../store/slices/authSlice';import{kiteApi}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const steps=['Visit Kite Developer','Create an App','Get Access Token'];export const AccessTokenInput=()=>{const[token,setToken]=useState('');const[validationError,setValidationError]=useState(null);const dispatch=useDispatch();const{error:authError,loading:authLoading}=useSelector(state=>state.auth);const handleSubmit=async e=>{e.preventDefault();if(!token.trim()){setValidationError('Please enter an access token');return;}dispatch(setLoading(true));try{await kiteApi.validateToken(token);dispatch(setAccessToken(token));setValidationError(null);}catch(error){var _error$response,_error$response$data;console.error('Token validation failed:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to validate token';setValidationError(errorMessage);dispatch(setError(errorMessage));}finally{dispatch(setLoading(false));}};return/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,maxWidth:600,mx:'auto',mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,color:\"primary\",children:\"Kite Access Token Setup\"}),/*#__PURE__*/_jsx(Stepper,{activeStep:2,alternativeLabel:true,sx:{mb:4},children:steps.map(label=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label))}),/*#__PURE__*/_jsxs(Box,{sx:{mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",paragraph:true,children:\"To get your access token:\"}),/*#__PURE__*/_jsxs(\"ol\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Typography,{children:[\"Visit\",' ',/*#__PURE__*/_jsx(Link,{href:\"https://developers.kite.trade/\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Kite Developer\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Typography,{children:\"Create an app in the developer console\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Typography,{children:\"Generate and copy your access token\"})})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Access Token\",variant:\"outlined\",value:token,onChange:e=>setToken(e.target.value),error:!!validationError||!!authError,helperText:validationError||authError,sx:{mb:2},disabled:authLoading}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:authLoading,children:authLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):'Validate Token'})]}),/*#__PURE__*/_jsx(Snackbar,{open:!!authError,autoHideDuration:6000,onClose:()=>dispatch(setError(null)),children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",onClose:()=>dispatch(setError(null)),children:authError})})]});};","map":{"version":3,"names":["React","useState","useDispatch","useSelector","TextField","Button","Box","Typography","Alert","Stepper","Step","StepLabel","Link","Paper","CircularProgress","Snackbar","setAccessToken","setError","setLoading","kiteApi","jsx","_jsx","jsxs","_jsxs","steps","AccessTokenInput","token","setToken","validationError","setValidationError","dispatch","error","authError","loading","authLoading","state","auth","handleSubmit","e","preventDefault","trim","validateToken","_error$response","_error$response$data","console","errorMessage","response","data","detail","elevation","sx","p","maxWidth","mx","mt","children","variant","gutterBottom","color","activeStep","alternativeLabel","mb","map","label","paragraph","href","target","rel","onSubmit","fullWidth","value","onChange","helperText","disabled","type","size","open","autoHideDuration","onClose","severity"],"sources":["C:/Users/inder/CascadeProjects/KavasCAPITALFASTAPI-new/frontend/src/components/Auth/AccessTokenInput.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  TextField,\n  Button,\n  Box,\n  Typography,\n  Alert,\n  Stepper,\n  Step,\n  StepLabel,\n  Link,\n  Paper,\n  CircularProgress,\n  Snackbar\n} from '@mui/material';\nimport { setAccessToken, setError, setLoading } from '../../store/slices/authSlice';\nimport { kiteApi } from '../../services/api';\nimport type { RootState } from '../../store';\n\nconst steps = [\n  'Visit Kite Developer',\n  'Create an App',\n  'Get Access Token'\n];\n\nexport const AccessTokenInput: React.FC = () => {\n  const [token, setToken] = useState('');\n  const [validationError, setValidationError] = useState<string | null>(null);\n  const dispatch = useDispatch();\n  const { error: authError, loading: authLoading } = useSelector((state: RootState) => state.auth);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!token.trim()) {\n      setValidationError('Please enter an access token');\n      return;\n    }\n\n    dispatch(setLoading(true));\n    try {\n      await kiteApi.validateToken(token);\n      dispatch(setAccessToken(token));\n      setValidationError(null);\n    } catch (error: any) {\n      console.error('Token validation failed:', error);\n      const errorMessage = error.response?.data?.detail || 'Failed to validate token';\n      setValidationError(errorMessage);\n      dispatch(setError(errorMessage));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n\n  return (\n    <Paper elevation={3} sx={{ p: 3, maxWidth: 600, mx: 'auto', mt: 4 }}>\n      <Typography variant=\"h5\" gutterBottom color=\"primary\">\n        Kite Access Token Setup\n      </Typography>\n\n      <Stepper activeStep={2} alternativeLabel sx={{ mb: 4 }}>\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"body1\" paragraph>\n          To get your access token:\n        </Typography>\n        <ol>\n          <li>\n            <Typography>\n              Visit{' '}\n              <Link\n                href=\"https://developers.kite.trade/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Kite Developer\n              </Link>\n            </Typography>\n          </li>\n          <li>\n            <Typography>Create an app in the developer console</Typography>\n          </li>\n          <li>\n            <Typography>Generate and copy your access token</Typography>\n          </li>\n        </ol>\n      </Box>\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          fullWidth\n          label=\"Access Token\"\n          variant=\"outlined\"\n          value={token}\n          onChange={(e) => setToken(e.target.value)}\n          error={!!validationError || !!authError}\n          helperText={validationError || authError}\n          sx={{ mb: 2 }}\n          disabled={authLoading}\n        />\n        \n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          disabled={authLoading}\n        >\n          {authLoading ? (\n            <CircularProgress size={24} color=\"inherit\" />\n          ) : (\n            'Validate Token'\n          )}\n        </Button>\n      </form>\n\n      <Snackbar \n        open={!!authError} \n        autoHideDuration={6000} \n        onClose={() => dispatch(setError(null))}\n      >\n        <Alert severity=\"error\" onClose={() => dispatch(setError(null))}>\n          {authError}\n        </Alert>\n      </Snackbar>\n    </Paper>\n  );\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OACEC,SAAS,CACTC,MAAM,CACNC,GAAG,CACHC,UAAU,CACVC,KAAK,CACLC,OAAO,CACPC,IAAI,CACJC,SAAS,CACTC,IAAI,CACJC,KAAK,CACLC,gBAAgB,CAChBC,QAAQ,KACH,eAAe,CACtB,OAASC,cAAc,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,8BAA8B,CACnF,OAASC,OAAO,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG7C,KAAM,CAAAC,KAAK,CAAG,CACZ,sBAAsB,CACtB,eAAe,CACf,kBAAkB,CACnB,CAED,MAAO,MAAM,CAAAC,gBAA0B,CAAGA,CAAA,GAAM,CAC9C,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC2B,eAAe,CAAEC,kBAAkB,CAAC,CAAG5B,QAAQ,CAAgB,IAAI,CAAC,CAC3E,KAAM,CAAA6B,QAAQ,CAAG5B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAE6B,KAAK,CAAEC,SAAS,CAAEC,OAAO,CAAEC,WAAY,CAAC,CAAG/B,WAAW,CAAEgC,KAAgB,EAAKA,KAAK,CAACC,IAAI,CAAC,CAEhG,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,CAAkB,EAAK,CACjDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACb,KAAK,CAACc,IAAI,CAAC,CAAC,CAAE,CACjBX,kBAAkB,CAAC,8BAA8B,CAAC,CAClD,OACF,CAEAC,QAAQ,CAACZ,UAAU,CAAC,IAAI,CAAC,CAAC,CAC1B,GAAI,CACF,KAAM,CAAAC,OAAO,CAACsB,aAAa,CAACf,KAAK,CAAC,CAClCI,QAAQ,CAACd,cAAc,CAACU,KAAK,CAAC,CAAC,CAC/BG,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,MAAOE,KAAU,CAAE,KAAAW,eAAA,CAAAC,oBAAA,CACnBC,OAAO,CAACb,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD,KAAM,CAAAc,YAAY,CAAG,EAAAH,eAAA,CAAAX,KAAK,CAACe,QAAQ,UAAAJ,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBK,IAAI,UAAAJ,oBAAA,iBAApBA,oBAAA,CAAsBK,MAAM,GAAI,0BAA0B,CAC/EnB,kBAAkB,CAACgB,YAAY,CAAC,CAChCf,QAAQ,CAACb,QAAQ,CAAC4B,YAAY,CAAC,CAAC,CAClC,CAAC,OAAS,CACRf,QAAQ,CAACZ,UAAU,CAAC,KAAK,CAAC,CAAC,CAC7B,CACF,CAAC,CAED,mBACEK,KAAA,CAACV,KAAK,EAACoC,SAAS,CAAE,CAAE,CAACC,EAAE,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAEC,QAAQ,CAAE,GAAG,CAAEC,EAAE,CAAE,MAAM,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,eAClElC,IAAA,CAACd,UAAU,EAACiD,OAAO,CAAC,IAAI,CAACC,YAAY,MAACC,KAAK,CAAC,SAAS,CAAAH,QAAA,CAAC,yBAEtD,CAAY,CAAC,cAEblC,IAAA,CAACZ,OAAO,EAACkD,UAAU,CAAE,CAAE,CAACC,gBAAgB,MAACV,EAAE,CAAE,CAAEW,EAAE,CAAE,CAAE,CAAE,CAAAN,QAAA,CACpD/B,KAAK,CAACsC,GAAG,CAAEC,KAAK,eACf1C,IAAA,CAACX,IAAI,EAAA6C,QAAA,cACHlC,IAAA,CAACV,SAAS,EAAA4C,QAAA,CAAEQ,KAAK,CAAY,CAAC,EADrBA,KAEL,CACP,CAAC,CACK,CAAC,cAEVxC,KAAA,CAACjB,GAAG,EAAC4C,EAAE,CAAE,CAAEW,EAAE,CAAE,CAAE,CAAE,CAAAN,QAAA,eACjBlC,IAAA,CAACd,UAAU,EAACiD,OAAO,CAAC,OAAO,CAACQ,SAAS,MAAAT,QAAA,CAAC,2BAEtC,CAAY,CAAC,cACbhC,KAAA,OAAAgC,QAAA,eACElC,IAAA,OAAAkC,QAAA,cACEhC,KAAA,CAAChB,UAAU,EAAAgD,QAAA,EAAC,OACL,CAAC,GAAG,cACTlC,IAAA,CAACT,IAAI,EACHqD,IAAI,CAAC,gCAAgC,CACrCC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CAAAZ,QAAA,CAC1B,gBAED,CAAM,CAAC,EACG,CAAC,CACX,CAAC,cACLlC,IAAA,OAAAkC,QAAA,cACElC,IAAA,CAACd,UAAU,EAAAgD,QAAA,CAAC,wCAAsC,CAAY,CAAC,CAC7D,CAAC,cACLlC,IAAA,OAAAkC,QAAA,cACElC,IAAA,CAACd,UAAU,EAAAgD,QAAA,CAAC,qCAAmC,CAAY,CAAC,CAC1D,CAAC,EACH,CAAC,EACF,CAAC,cAENhC,KAAA,SAAM6C,QAAQ,CAAE/B,YAAa,CAAAkB,QAAA,eAC3BlC,IAAA,CAACjB,SAAS,EACRiE,SAAS,MACTN,KAAK,CAAC,cAAc,CACpBP,OAAO,CAAC,UAAU,CAClBc,KAAK,CAAE5C,KAAM,CACb6C,QAAQ,CAAGjC,CAAC,EAAKX,QAAQ,CAACW,CAAC,CAAC4B,MAAM,CAACI,KAAK,CAAE,CAC1CvC,KAAK,CAAE,CAAC,CAACH,eAAe,EAAI,CAAC,CAACI,SAAU,CACxCwC,UAAU,CAAE5C,eAAe,EAAII,SAAU,CACzCkB,EAAE,CAAE,CAAEW,EAAE,CAAE,CAAE,CAAE,CACdY,QAAQ,CAAEvC,WAAY,CACvB,CAAC,cAEFb,IAAA,CAAChB,MAAM,EACLqE,IAAI,CAAC,QAAQ,CACblB,OAAO,CAAC,WAAW,CACnBE,KAAK,CAAC,SAAS,CACfW,SAAS,MACTI,QAAQ,CAAEvC,WAAY,CAAAqB,QAAA,CAErBrB,WAAW,cACVb,IAAA,CAACP,gBAAgB,EAAC6D,IAAI,CAAE,EAAG,CAACjB,KAAK,CAAC,SAAS,CAAE,CAAC,CAE9C,gBACD,CACK,CAAC,EACL,CAAC,cAEPrC,IAAA,CAACN,QAAQ,EACP6D,IAAI,CAAE,CAAC,CAAC5C,SAAU,CAClB6C,gBAAgB,CAAE,IAAK,CACvBC,OAAO,CAAEA,CAAA,GAAMhD,QAAQ,CAACb,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAAsC,QAAA,cAExClC,IAAA,CAACb,KAAK,EAACuE,QAAQ,CAAC,OAAO,CAACD,OAAO,CAAEA,CAAA,GAAMhD,QAAQ,CAACb,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAAsC,QAAA,CAC7DvB,SAAS,CACL,CAAC,CACA,CAAC,EACN,CAAC,CAEZ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}