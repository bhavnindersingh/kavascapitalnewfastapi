{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\inder\\\\CascadeProjects\\\\KavasCAPITALFASTAPI-new\\\\frontend\\\\src\\\\components\\\\Auth\\\\AccessTokenInput.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Box, TextField, Button, Alert, Paper, Typography, CircularProgress, Snackbar } from '@mui/material';\nimport { kiteApi } from '../../services/api';\nimport { setAccessToken, setLoading, setError, logout, clearError } from '../../store/slices/authSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AccessTokenInput = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    isAuthenticated,\n    loading,\n    error\n  } = useSelector(state => state.auth);\n  const [token, setToken] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const handleValidate = useCallback(async () => {\n    if (!token.trim()) {\n      dispatch(setError('Access token is required'));\n      return;\n    }\n    try {\n      dispatch(setLoading(true));\n      // First store the token\n      dispatch(setAccessToken(token));\n\n      // Then validate it\n      const isValid = await kiteApi.validateToken();\n      if (isValid) {\n        setSuccessMessage('Access token validated successfully!');\n        setToken('');\n      } else {\n        throw new Error('Invalid access token');\n      }\n    } catch (error) {\n      dispatch(setError(error instanceof Error ? error.message : 'Failed to validate token'));\n      dispatch(logout());\n    } finally {\n      dispatch(setLoading(false));\n    }\n  }, [dispatch, token]);\n  const handleLogout = () => {\n    dispatch(logout());\n    setToken('');\n    setSuccessMessage('Logged out successfully');\n  };\n  const handleCloseSuccess = () => {\n    setSuccessMessage('');\n  };\n  const handleCloseError = () => {\n    dispatch(clearError());\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    sx: {\n      p: 3,\n      maxWidth: 600,\n      mx: 'auto',\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Kite Access Token\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), isAuthenticated ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mb: 2\n        },\n        children: \"You are authenticated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        color: \"secondary\",\n        onClick: handleLogout,\n        disabled: loading,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Access Token\",\n        value: token,\n        onChange: e => setToken(e.target.value),\n        disabled: loading,\n        error: Boolean(error),\n        helperText: error,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleValidate,\n        disabled: loading,\n        startIcon: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 46\n        }, this) : null,\n        children: \"Validate & Store Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: Boolean(successMessage),\n      autoHideDuration: 6000,\n      onClose: handleCloseSuccess,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseSuccess,\n        severity: \"success\",\n        children: successMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: Boolean(error),\n      autoHideDuration: 6000,\n      onClose: handleCloseError,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseError,\n        severity: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(AccessTokenInput, \"COOiz1wWJ4LX6LQsuESF5QWtdY8=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = AccessTokenInput;\nvar _c;\n$RefreshReg$(_c, \"AccessTokenInput\");","map":{"version":3,"names":["React","useState","useCallback","useDispatch","useSelector","Box","TextField","Button","Alert","Paper","Typography","CircularProgress","Snackbar","kiteApi","setAccessToken","setLoading","setError","logout","clearError","jsxDEV","_jsxDEV","AccessTokenInput","_s","dispatch","isAuthenticated","loading","error","state","auth","token","setToken","successMessage","setSuccessMessage","handleValidate","trim","isValid","validateToken","Error","message","handleLogout","handleCloseSuccess","handleCloseError","sx","p","maxWidth","mx","mt","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","color","onClick","disabled","fullWidth","label","value","onChange","e","target","Boolean","helperText","startIcon","size","open","autoHideDuration","onClose","_c","$RefreshReg$"],"sources":["C:/Users/inder/CascadeProjects/KavasCAPITALFASTAPI-new/frontend/src/components/Auth/AccessTokenInput.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    Box,\n    TextField,\n    Button,\n    Alert,\n    Paper,\n    Typography,\n    CircularProgress,\n    Snackbar,\n} from '@mui/material';\nimport { RootState } from '../../store';\nimport { kiteApi } from '../../services/api';\nimport {\n    setAccessToken,\n    setLoading,\n    setError,\n    logout,\n    clearError,\n} from '../../store/slices/authSlice';\n\nexport const AccessTokenInput: React.FC = () => {\n    const dispatch = useDispatch();\n    const { isAuthenticated, loading, error } = useSelector(\n        (state: RootState) => state.auth\n    );\n    const [token, setToken] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n\n    const handleValidate = useCallback(async () => {\n        if (!token.trim()) {\n            dispatch(setError('Access token is required'));\n            return;\n        }\n\n        try {\n            dispatch(setLoading(true));\n            // First store the token\n            dispatch(setAccessToken(token));\n            \n            // Then validate it\n            const isValid = await kiteApi.validateToken();\n            \n            if (isValid) {\n                setSuccessMessage('Access token validated successfully!');\n                setToken('');\n            } else {\n                throw new Error('Invalid access token');\n            }\n        } catch (error) {\n            dispatch(setError(error instanceof Error ? error.message : 'Failed to validate token'));\n            dispatch(logout());\n        } finally {\n            dispatch(setLoading(false));\n        }\n    }, [dispatch, token]);\n\n    const handleLogout = () => {\n        dispatch(logout());\n        setToken('');\n        setSuccessMessage('Logged out successfully');\n    };\n\n    const handleCloseSuccess = () => {\n        setSuccessMessage('');\n    };\n\n    const handleCloseError = () => {\n        dispatch(clearError());\n    };\n\n    return (\n        <Paper sx={{ p: 3, maxWidth: 600, mx: 'auto', mt: 4 }}>\n            <Typography variant=\"h6\" gutterBottom>\n                Kite Access Token\n            </Typography>\n            \n            {isAuthenticated ? (\n                <Box sx={{ mt: 2 }}>\n                    <Alert severity=\"success\" sx={{ mb: 2 }}>\n                        You are authenticated\n                    </Alert>\n                    <Button\n                        variant=\"outlined\"\n                        color=\"secondary\"\n                        onClick={handleLogout}\n                        disabled={loading}\n                    >\n                        Logout\n                    </Button>\n                </Box>\n            ) : (\n                <Box sx={{ mt: 2 }}>\n                    <TextField\n                        fullWidth\n                        label=\"Access Token\"\n                        value={token}\n                        onChange={(e) => setToken(e.target.value)}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        helperText={error}\n                        sx={{ mb: 2 }}\n                    />\n                    <Button\n                        variant=\"contained\"\n                        onClick={handleValidate}\n                        disabled={loading}\n                        startIcon={loading ? <CircularProgress size={20} /> : null}\n                    >\n                        Validate & Store Token\n                    </Button>\n                </Box>\n            )}\n\n            <Snackbar\n                open={Boolean(successMessage)}\n                autoHideDuration={6000}\n                onClose={handleCloseSuccess}\n            >\n                <Alert onClose={handleCloseSuccess} severity=\"success\">\n                    {successMessage}\n                </Alert>\n            </Snackbar>\n\n            <Snackbar\n                open={Boolean(error)}\n                autoHideDuration={6000}\n                onClose={handleCloseError}\n            >\n                <Alert onClose={handleCloseError} severity=\"error\">\n                    {error}\n                </Alert>\n            </Snackbar>\n        </Paper>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}