{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useWebSocket } from './useWebSocket';\nimport { setError } from '../store/slices/authSlice';\nexport const useAuth = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    isAuthenticated,\n    accessToken,\n    loading,\n    error\n  } = useSelector(state => state.auth);\n  const {\n    connect,\n    disconnect\n  } = useWebSocket();\n  useEffect(() => {\n    if (isAuthenticated && accessToken) {\n      // When authenticated, connect to WebSocket\n      connect();\n    } else {\n      // When not authenticated, disconnect from WebSocket\n      disconnect();\n    }\n  }, [isAuthenticated, accessToken, connect, disconnect]);\n  useEffect(() => {\n    // Check if token exists in localStorage but not in state\n    const storedToken = localStorage.getItem('kite_access_token');\n    if (storedToken && !accessToken) {\n      dispatch(setError('Session expired. Please login again.'));\n    }\n  }, [dispatch, accessToken]);\n  return {\n    isAuthenticated,\n    accessToken,\n    loading,\n    error\n  };\n};\n_s(useAuth, \"jbzpusE/00B6uD/S0N+Uos4dozw=\", false, function () {\n  return [useDispatch, useSelector, useWebSocket];\n});","map":{"version":3,"names":["useEffect","useDispatch","useSelector","useWebSocket","setError","useAuth","_s","dispatch","isAuthenticated","accessToken","loading","error","state","auth","connect","disconnect","storedToken","localStorage","getItem"],"sources":["C:/Users/inder/CascadeProjects/KavasCAPITALFASTAPI-new/frontend/src/hooks/useAuth.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../store';\nimport { useWebSocket } from './useWebSocket';\nimport { setError } from '../store/slices/authSlice';\n\nexport const useAuth = (): {\n  isAuthenticated: boolean;\n  accessToken: string | null;\n  loading: boolean;\n  error: string | null;\n} => {\n  const dispatch = useDispatch();\n  const { isAuthenticated, accessToken, loading, error } = useSelector(\n    (state: RootState) => state.auth\n  );\n  const { connect, disconnect } = useWebSocket();\n\n  useEffect(() => {\n    if (isAuthenticated && accessToken) {\n      // When authenticated, connect to WebSocket\n      connect();\n    } else {\n      // When not authenticated, disconnect from WebSocket\n      disconnect();\n    }\n  }, [isAuthenticated, accessToken, connect, disconnect]);\n\n  useEffect(() => {\n    // Check if token exists in localStorage but not in state\n    const storedToken = localStorage.getItem('kite_access_token');\n    if (storedToken && !accessToken) {\n      dispatch(setError('Session expired. Please login again.'));\n    }\n  }, [dispatch, accessToken]);\n\n  return {\n    isAuthenticated,\n    accessToken,\n    loading,\n    error,\n  };\n};\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAEtD,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,QAAQ,QAAQ,2BAA2B;AAEpD,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAKlB;EAAAC,EAAA;EACH,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEO,eAAe;IAAEC,WAAW;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGT,WAAW,CACjEU,KAAgB,IAAKA,KAAK,CAACC,IAC9B,CAAC;EACD,MAAM;IAAEC,OAAO;IAAEC;EAAW,CAAC,GAAGZ,YAAY,CAAC,CAAC;EAE9CH,SAAS,CAAC,MAAM;IACd,IAAIQ,eAAe,IAAIC,WAAW,EAAE;MAClC;MACAK,OAAO,CAAC,CAAC;IACX,CAAC,MAAM;MACL;MACAC,UAAU,CAAC,CAAC;IACd;EACF,CAAC,EAAE,CAACP,eAAe,EAAEC,WAAW,EAAEK,OAAO,EAAEC,UAAU,CAAC,CAAC;EAEvDf,SAAS,CAAC,MAAM;IACd;IACA,MAAMgB,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;IAC7D,IAAIF,WAAW,IAAI,CAACP,WAAW,EAAE;MAC/BF,QAAQ,CAACH,QAAQ,CAAC,sCAAsC,CAAC,CAAC;IAC5D;EACF,CAAC,EAAE,CAACG,QAAQ,EAAEE,WAAW,CAAC,CAAC;EAE3B,OAAO;IACLD,eAAe;IACfC,WAAW;IACXC,OAAO;IACPC;EACF,CAAC;AACH,CAAC;AAACL,EAAA,CApCWD,OAAO;EAAA,QAMDJ,WAAW,EAC6BC,WAAW,EAGpCC,YAAY;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}