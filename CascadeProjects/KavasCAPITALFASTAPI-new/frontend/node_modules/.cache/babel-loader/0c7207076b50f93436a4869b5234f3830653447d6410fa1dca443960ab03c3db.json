{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\inder\\\\CascadeProjects\\\\KavasCAPITALFASTAPI-new\\\\frontend\\\\src\\\\components\\\\Auth\\\\AccessTokenInput.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Box, TextField, Button, CircularProgress, Snackbar, Alert } from '@mui/material';\nimport { setAccessToken, setError } from '../../store/slices/authSlice';\nimport { useWebSocket } from '../../hooks/useWebSocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AccessTokenInput = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    isAuthenticated,\n    error\n  } = useSelector(state => state.auth);\n  const [token, setToken] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const {\n    connect\n  } = useWebSocket();\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    if (!token.trim()) {\n      dispatch(setError('Please enter an access token'));\n      return;\n    }\n    setLoading(true);\n    try {\n      // Store the token\n      localStorage.setItem('kite_access_token', token);\n\n      // Update Redux state\n      dispatch(setAccessToken(token));\n\n      // Initialize WebSocket connection after token is set\n      setTimeout(() => {\n        connect();\n        setSuccessMessage('Access token saved successfully');\n        setToken('');\n        setLoading(false);\n      }, 0);\n    } catch (error) {\n      console.error('Error setting access token:', error);\n      dispatch(setError('Error setting access token'));\n      setLoading(false);\n    }\n  }, [token, dispatch, connect]);\n  const handleTokenChange = useCallback(e => {\n    setToken(e.target.value);\n  }, []);\n  const handleClose = () => {\n    setSuccessMessage('');\n  };\n  const handleErrorClose = () => {\n    dispatch(setError(null));\n  };\n  if (isAuthenticated) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: \"form\",\n    onSubmit: handleSubmit,\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: 2,\n      maxWidth: 400,\n      mx: 'auto',\n      p: 2\n    },\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      fullWidth: true,\n      label: \"Access Token\",\n      variant: \"outlined\",\n      value: token,\n      onChange: handleTokenChange,\n      disabled: loading || isAuthenticated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: loading || !token.trim() || isAuthenticated,\n      sx: {\n        width: 200\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 24\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 20\n      }, this) : 'Submit'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!successMessage,\n      autoHideDuration: 6000,\n      onClose: handleClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleClose,\n        severity: \"success\",\n        children: successMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!error,\n      autoHideDuration: 6000,\n      onClose: handleErrorClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleErrorClose,\n        severity: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(AccessTokenInput, \"mUYEGO34OUvct1df6xYu25CTl7Y=\", false, function () {\n  return [useDispatch, useSelector, useWebSocket];\n});\n_c = AccessTokenInput;\nvar _c;\n$RefreshReg$(_c, \"AccessTokenInput\");","map":{"version":3,"names":["React","useState","useCallback","useDispatch","useSelector","Box","TextField","Button","CircularProgress","Snackbar","Alert","setAccessToken","setError","useWebSocket","jsxDEV","_jsxDEV","AccessTokenInput","_s","dispatch","isAuthenticated","error","state","auth","token","setToken","loading","setLoading","successMessage","setSuccessMessage","connect","handleSubmit","e","preventDefault","trim","localStorage","setItem","setTimeout","console","handleTokenChange","target","value","handleClose","handleErrorClose","component","onSubmit","sx","display","flexDirection","alignItems","gap","maxWidth","mx","p","children","fullWidth","label","variant","onChange","disabled","fileName","_jsxFileName","lineNumber","columnNumber","type","color","width","size","open","autoHideDuration","onClose","severity","_c","$RefreshReg$"],"sources":["C:/Users/inder/CascadeProjects/KavasCAPITALFASTAPI-new/frontend/src/components/Auth/AccessTokenInput.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Box, TextField, Button, CircularProgress, Snackbar, Alert } from '@mui/material';\nimport type { RootState } from '../../store';\nimport { setAccessToken, setError } from '../../store/slices/authSlice';\nimport { useWebSocket } from '../../hooks/useWebSocket';\n\nexport const AccessTokenInput: React.FC = () => {\n  const dispatch = useDispatch();\n  const { isAuthenticated, error } = useSelector((state: RootState) => state.auth);\n  const [token, setToken] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const { connect } = useWebSocket();\n\n  const handleSubmit = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!token.trim()) {\n      dispatch(setError('Please enter an access token'));\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Store the token\n      localStorage.setItem('kite_access_token', token);\n      \n      // Update Redux state\n      dispatch(setAccessToken(token));\n      \n      // Initialize WebSocket connection after token is set\n      setTimeout(() => {\n        connect();\n        setSuccessMessage('Access token saved successfully');\n        setToken('');\n        setLoading(false);\n      }, 0);\n    } catch (error) {\n      console.error('Error setting access token:', error);\n      dispatch(setError('Error setting access token'));\n      setLoading(false);\n    }\n  }, [token, dispatch, connect]);\n\n  const handleTokenChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setToken(e.target.value);\n  }, []);\n\n  const handleClose = () => {\n    setSuccessMessage('');\n  };\n\n  const handleErrorClose = () => {\n    dispatch(setError(null));\n  };\n\n  if (isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <Box\n      component=\"form\"\n      onSubmit={handleSubmit}\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 2,\n        maxWidth: 400,\n        mx: 'auto',\n        p: 2,\n      }}\n    >\n      <TextField\n        fullWidth\n        label=\"Access Token\"\n        variant=\"outlined\"\n        value={token}\n        onChange={handleTokenChange}\n        disabled={loading || isAuthenticated}\n      />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={loading || !token.trim() || isAuthenticated}\n        sx={{ width: 200 }}\n      >\n        {loading ? <CircularProgress size={24} /> : 'Submit'}\n      </Button>\n      <Snackbar\n        open={!!successMessage}\n        autoHideDuration={6000}\n        onClose={handleClose}\n      >\n        <Alert onClose={handleClose} severity=\"success\">\n          {successMessage}\n        </Alert>\n      </Snackbar>\n      <Snackbar\n        open={!!error}\n        autoHideDuration={6000}\n        onClose={handleErrorClose}\n      >\n        <Alert onClose={handleErrorClose} severity=\"error\">\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}