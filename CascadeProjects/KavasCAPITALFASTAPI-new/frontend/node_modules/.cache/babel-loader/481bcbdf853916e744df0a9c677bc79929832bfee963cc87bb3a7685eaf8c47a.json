{"ast":null,"code":"import{useState,useCallback}from'react';import{optionsApi}from'../../../services/api';export const useOptionChainData=_ref=>{let{symbol,expiry,threshold=0.05}=_ref;const[expiryDates,setExpiryDates]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const fetchExpiryDates=useCallback(async symbol=>{if(!symbol){setExpiryDates([]);return;}try{setLoading(true);setError(null);const response=await optionsApi.getExpiryDates(symbol);if(response.data&&Array.isArray(response.data)){setExpiryDates(response.data);}else{throw new Error('Invalid expiry dates format received');}}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||'Failed to fetch expiry dates';setError(errorMessage);setExpiryDates([]);console.error('Failed to fetch expiry dates:',err);}finally{setLoading(false);}},[]);return{expiryDates,loading,error,fetchExpiryDates};};","map":{"version":3,"names":["useState","useCallback","optionsApi","useOptionChainData","_ref","symbol","expiry","threshold","expiryDates","setExpiryDates","loading","setLoading","error","setError","fetchExpiryDates","response","getExpiryDates","data","Array","isArray","Error","err","_err$response","_err$response$data","errorMessage","detail","message","console"],"sources":["C:/Users/inder/CascadeProjects/KavasCAPITALFASTAPI-new/frontend/src/components/OptionChain/hooks/useOptionChainData.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { optionsApi } from '../../../services/api';\r\n\r\ninterface UseOptionChainDataProps {\r\n  symbol: string;\r\n  expiry?: string;\r\n  threshold?: number;\r\n}\r\n\r\ninterface UseOptionChainDataReturn {\r\n  expiryDates: string[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  fetchExpiryDates: (symbol: string) => Promise<void>;\r\n}\r\n\r\nexport const useOptionChainData = ({\r\n  symbol,\r\n  expiry,\r\n  threshold = 0.05\r\n}: UseOptionChainDataProps): UseOptionChainDataReturn => {\r\n  const [expiryDates, setExpiryDates] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchExpiryDates = useCallback(async (symbol: string) => {\r\n    if (!symbol) {\r\n      setExpiryDates([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await optionsApi.getExpiryDates(symbol);\r\n      \r\n      if (response.data && Array.isArray(response.data)) {\r\n        setExpiryDates(response.data);\r\n      } else {\r\n        throw new Error('Invalid expiry dates format received');\r\n      }\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.detail || err.message || 'Failed to fetch expiry dates';\r\n      setError(errorMessage);\r\n      setExpiryDates([]);\r\n      console.error('Failed to fetch expiry dates:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    expiryDates,\r\n    loading,\r\n    error,\r\n    fetchExpiryDates,\r\n  };\r\n};"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC7C,OAASC,UAAU,KAAQ,uBAAuB,CAelD,MAAO,MAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAIuB,IAJtB,CACjCC,MAAM,CACNC,MAAM,CACNC,SAAS,CAAG,IACW,CAAC,CAAAH,IAAA,CACxB,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAW,EAAE,CAAC,CAC5D,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAc,gBAAgB,CAAGb,WAAW,CAAC,KAAO,CAAAI,MAAc,EAAK,CAC7D,GAAI,CAACA,MAAM,CAAE,CACXI,cAAc,CAAC,EAAE,CAAC,CAClB,OACF,CAEA,GAAI,CACFE,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAb,UAAU,CAACc,cAAc,CAACX,MAAM,CAAC,CAExD,GAAIU,QAAQ,CAACE,IAAI,EAAIC,KAAK,CAACC,OAAO,CAACJ,QAAQ,CAACE,IAAI,CAAC,CAAE,CACjDR,cAAc,CAACM,QAAQ,CAACE,IAAI,CAAC,CAC/B,CAAC,IAAM,CACL,KAAM,IAAI,CAAAG,KAAK,CAAC,sCAAsC,CAAC,CACzD,CACF,CAAE,MAAOC,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjB,KAAM,CAAAC,YAAY,CAAG,EAAAF,aAAA,CAAAD,GAAG,CAACN,QAAQ,UAAAO,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcL,IAAI,UAAAM,kBAAA,iBAAlBA,kBAAA,CAAoBE,MAAM,GAAIJ,GAAG,CAACK,OAAO,EAAI,8BAA8B,CAChGb,QAAQ,CAACW,YAAY,CAAC,CACtBf,cAAc,CAAC,EAAE,CAAC,CAClBkB,OAAO,CAACf,KAAK,CAAC,+BAA+B,CAAES,GAAG,CAAC,CACrD,CAAC,OAAS,CACRV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLH,WAAW,CACXE,OAAO,CACPE,KAAK,CACLE,gBACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}